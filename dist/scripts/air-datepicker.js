function _createForOfIteratorHelper(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw s}}}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,a,s=[],r=!0,o=!1;try{for(i=i.call(e);!(r=(n=i.next()).done)&&(s.push(n.value),!t||s.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports.AirDatepicker=t():e.AirDatepicker=t()}(this,(function(){return function(){"use strict";var e,t={d:function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},i={};t.d(i,{default:function(){return ae}});var n="days",a="months",s="years",r="day",o="month",l="year",c="changeViewDate",h="changeCurrentView",u="changeFocusDate",d="changeSelectedDate",p="changeTime",f="changeLastSelectedDate",v="selectDate",y="unselectDate",m="-weekend-",g={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:n,minView:n,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof e?t.querySelector(e):e}function k(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.tagName,n=void 0===i?"div":i,a=t.className,s=void 0===a?"":a,r=t.innerHtml,o=void 0===r?"":r,l=t.id,c=void 0===l?"":l,h=t.attrs,u=void 0===h?{}:h,d=document.createElement(n);if(s&&(e=d.classList).add.apply(e,_toConsumableArray(s.split(" "))),c&&(d.id=c),o&&(d.innerHTML=o),u)for(var p in u)d.setAttribute(p,u[p]);return d}function b(e,t){for(var i=0,n=Object.entries(t);i<n.length;i++){var a=_slicedToArray(n[i],2),s=a[0],r=a[1];e.setAttribute(s,r)}return e}function w(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function _(e){var t=e.getHours(),i=t%12==0?12:t%12;return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:t,fullHours:C(t),hours12:i,fullHours12:C(i),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}}function C(e){return e<10?"0"+e:e}function M(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]}function $(){for(var e=[],t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach((function(t){if("object"==_typeof(t))for(var i in t)t[i]&&e.push(i);else t&&e.push(t)})),e.join(" ")}function T(e,t){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;if(!e||!t)return!1;var o=_(e),l=_(t),c=(_defineProperty(i={},n,o.date===l.date&&o.month===l.month&&o.year===l.year),_defineProperty(i,a,o.month===l.month&&o.year===l.year),_defineProperty(i,s,o.year===l.year),i);return c[r]}function S(e,t,i){var n=F(e,!1).getTime(),a=F(t,!1).getTime();return i?n>=a:n>a}function A(e,t){return!S(e,t,!0)}function F(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new Date(e.getTime());return"boolean"!=typeof t||t||V(i),i}function V(e){return e.setHours(0,0,0,0),e}function x(e,t,i){e.length?e.forEach((function(e){e.addEventListener(t,i)})):e.addEventListener(t,i)}function H(e,t){return!(!e||e===document||e instanceof DocumentFragment)&&(e.matches(t)?e:H(e.parentNode,t))}function O(e,t,i){return e>i?i:e<t?t:e}function L(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.filter((function(e){return e})).forEach((function(t){for(var i=0,n=Object.entries(t);i<n.length;i++){var a=_slicedToArray(n[i],2),s=a[0],r=a[1];if(void 0!==r&&"[object Object]"===r.toString()){var o=void 0!==e[s]?e[s].toString():void 0,l=r.toString(),c=Array.isArray(r)?[]:{};e[s]=e[s]?o!==l?c:e[s]:c,L(e[s],r)}else e[s]=r}})),e}function E(e){var t=e;return e instanceof Date||(t=new Date(e)),isNaN(t.getTime())&&(console.log('Unable to convert value "'.concat(e,'" to Date object')),t=!1),t}function I(e){var t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")}function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var P=function(){function e(){var t=this;_classCallCheck(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.type,a=i.date,s=i.dp,r=i.opts,o=i.body;N(this,"focus",(function(){t.$cell.classList.add("-focus-"),t.focused=!0})),N(this,"removeFocus",(function(){t.$cell.classList.remove("-focus-"),t.focused=!1})),N(this,"select",(function(){t.$cell.classList.add("-selected-"),t.selected=!0})),N(this,"removeSelect",(function(){t.$cell.classList.remove("-selected-","-range-from-","-range-to-"),t.selected=!1})),N(this,"onChangeSelectedDate",(function(){t.isDisabled||(t._handleSelectedStatus(),t.opts.range&&t._handleRangeStatus())})),N(this,"onChangeFocusDate",(function(e){if(e){var i=T(e,t.date,t.type);i?t.focus():!i&&t.focused&&t.removeFocus(),t.opts.range&&t._handleRangeStatus()}else t.focused&&t.removeFocus()})),N(this,"render",(function(){return t.$cell.innerHTML=t._getHtml(),t.$cell.adpCell=t,t.$cell})),this.type=n,this.singleType=this.type.slice(0,-1),this.date=a,this.dp=s,this.opts=r,this.body=o,this.customData=!1,this.init()}return _createClass(e,[{key:"init",value:function(){var e=this.opts,t=e.range,i=e.onRenderCell;i&&(this.customData=i({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),t&&this._handleRangeStatus())}},{key:"_bindDatepickerEvents",value:function(){this.dp.on(d,this.onChangeSelectedDate),this.dp.on(u,this.onChangeFocusDate)}},{key:"unbindDatepickerEvents",value:function(){this.dp.off(d,this.onChangeSelectedDate),this.dp.off(u,this.onChangeFocusDate)}},{key:"_createElement",value:function(){var e=_(this.date),t=e.year,i=e.month,n=e.date;this.$cell=k({className:this._getClassName(),attrs:{"data-year":t,"data-month":i,"data-date":n}})}},{key:"_getClassName",value:function(){var e,t,i=new Date,r=this.opts,o=r.selectOtherMonths,l=r.selectOtherYears,c=this.dp,h=c.minDate,u=c.maxDate,d=_(this.date).day,p=this._isOutOfMinMaxRange(),f=null===(e=this.customData)||void 0===e?void 0:e.disabled,v=$("air-datepicker-cell","-".concat(this.singleType,"-"),{"-current-":T(i,this.date,this.type),"-min-date-":h&&T(h,this.date,this.type),"-max-date-":u&&T(u,this.date,this.type)}),y="";switch(this.type){case n:y=$({"-weekend-":this.dp.isWeekend(d),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!o||p||f});break;case a:y=$({"-disabled-":p||f});break;case s:y=$({"-other-decade-":this.isOtherDecade,"-disabled-":p||this.isOtherDecade&&!l||f})}return $(v,y,null===(t=this.customData)||void 0===t?void 0:t.classes)}},{key:"_getHtml",value:function(){var e,t=_(this.date),i=t.year,r=t.month,o=t.date,l=this.opts,c=l.showOtherMonths,h=l.showOtherYears;if(null!==(e=this.customData)&&void 0!==e&&e.html)return this.customData.html;switch(this.type){case n:return!c&&this.isOtherMonth?"":o;case a:return this.dp.locale[this.opts.monthsField][r];case s:return!h&&this.isOtherDecade?"":i}}},{key:"_isOutOfMinMaxRange",value:function(){var e=this.dp,t=e.minDate,i=e.maxDate,a=this.type,r=_(this.date),o=r.month,l=r.year,c=r.date,h=a===n,u=a===s,d=!!t&&new Date(l,u?t.getMonth():o,h?c:t.getDate()),p=!!i&&new Date(l,u?i.getMonth():o,h?c:i.getDate());return t&&i?A(d,t)||S(p,i):t?A(d,t):i?S(p,i):void 0}},{key:"destroy",value:function(){this.unbindDatepickerEvents()}},{key:"_handleRangeStatus",value:function(){var e,t,i,n,a=this.dp,s=a.rangeDateFrom,r=a.rangeDateTo,o=$({"-in-range-":s&&r&&(t=this.date,i=s,n=r,S(t,i)&&A(t,n)),"-range-from-":s&&T(this.date,s,this.type),"-range-to-":r&&T(this.date,r,this.type)});this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),o&&(e=this.$cell.classList).add.apply(e,_toConsumableArray(o.split(" ")))}},{key:"_handleSelectedStatus",value:function(){var e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}},{key:"_handleInitialFocusStatus",value:function(){T(this.dp.focusDate,this.date,this.type)&&this.focus()}},{key:"isDisabled",get:function(){return this.$cell.matches(".-disabled-")}},{key:"isOtherMonth",get:function(){return this.dp.isOtherMonth(this.date)}},{key:"isOtherDecade",get:function(){return this.dp.isOtherDecade(this.date)}}]),e}();function R(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var j=(_defineProperty(e={},n,'<div class="air-datepicker-body--day-names"></div>'+'<div class="air-datepicker-body--cells -'.concat(n,'-"></div>')),_defineProperty(e,a,'<div class="air-datepicker-body--cells -'.concat(a,'-"></div>')),_defineProperty(e,s,'<div class="air-datepicker-body--cells -'.concat(s,'-"></div>')),e),B=function(){function e(t){var i=this;_classCallCheck(this,e);var r=t.dp,o=t.type,l=t.opts;R(this,"handleClick",(function(e){var t=e.target.adpCell;if(!t.isDisabled)if(i.dp.isMinViewReached){var n=i.dp._checkIfDateIsSelected(t.date,t.type);n?i.dp._handleAlreadySelectedDates(n,t.date):i.dp.selectDate(t.date)}else i.dp.down()})),R(this,"handleDayNameClick",(function(e){var t=e.target.getAttribute("data-day-index");i.opts.onClickDayName({dayIndex:Number(t),datepicker:i.dp})})),R(this,"onChangeCurrentView",(function(e){e!==i.type?i.hide():(i.show(),i.render())})),R(this,"onMouseOverCell",(function(e){var t=H(e.target,".air-datepicker-cell");i.dp.setFocusDate(!!t&&t.adpCell.date)})),R(this,"onMouseOutCell",(function(){i.dp.setFocusDate(!1)})),R(this,"onClickBody",(function(e){var t=i.opts.onClickDayName,n=e.target;n.closest(".air-datepicker-cell")&&i.handleClick(e),t&&n.closest(".air-datepicker-body--day-name")&&i.handleDayNameClick(e)})),R(this,"onMouseDown",(function(e){i.pressed=!0;var t=H(e.target,".air-datepicker-cell"),n=t&&t.adpCell;T(n.date,i.dp.rangeDateFrom)&&(i.rangeFromFocused=!0),T(n.date,i.dp.rangeDateTo)&&(i.rangeToFocused=!0)})),R(this,"onMouseMove",(function(e){if(i.pressed&&i.dp.isMinViewReached){e.preventDefault();var t=H(e.target,".air-datepicker-cell"),n=t&&t.adpCell,a=i.dp,s=a.selectedDates,r=a.rangeDateTo,o=a.rangeDateFrom;if(n&&!n.isDisabled){var l=n.date;if(2===s.length){if(i.rangeFromFocused&&!S(l,r)){var c=_(o),h=c.hours,u=c.minutes;l.setHours(h),l.setMinutes(u),i.dp.rangeDateFrom=l,i.dp.replaceDate(o,l)}if(i.rangeToFocused&&!A(l,o)){var d=_(r),p=d.hours,f=d.minutes;l.setHours(p),l.setMinutes(f),i.dp.rangeDateTo=l,i.dp.replaceDate(r,l)}}}}})),R(this,"onMouseUp",(function(){i.pressed=!1,i.rangeFromFocused=!1,i.rangeToFocused=!1})),R(this,"onChangeViewDate",(function(e,t){if(i.isVisible){var r=M(e),o=M(t);switch(i.dp.currentView){case n:if(T(e,t,a))return;break;case a:if(T(e,t,s))return;break;case s:if(r[0]===o[0]&&r[1]===o[1])return}i.render()}})),R(this,"render",(function(){i.destroyCells(),i._generateCells(),i.cells.forEach((function(e){i.$cells.appendChild(e.render())}))})),this.dp=r,this.type=o,this.opts=l,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}return _createClass(e,[{key:"init",value:function(){this._buildBaseHtml(),this.type===n&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}},{key:"_bindEvents",value:function(){var e=this.opts,t=e.range,i=e.dynamicRange;x(this.$el,"mouseover",this.onMouseOverCell),x(this.$el,"mouseout",this.onMouseOutCell),x(this.$el,"click",this.onClickBody),t&&i&&(x(this.$el,"mousedown",this.onMouseDown),x(this.$el,"mousemove",this.onMouseMove),x(window.document,"mouseup",this.onMouseUp))}},{key:"_bindDatepickerEvents",value:function(){this.dp.on(c,this.onChangeViewDate),this.dp.on(h,this.onChangeCurrentView)}},{key:"_buildBaseHtml",value:function(){this.$el=k({className:"air-datepicker-body -".concat(this.type,"-"),innerHtml:j[this.type]}),this.$names=D(".air-datepicker-body--day-names",this.$el),this.$cells=D(".air-datepicker-body--cells",this.$el)}},{key:"_getDayNamesHtml",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,t="",i=this.dp.isWeekend,n=this.opts.onClickDayName,a=e,s=0;s<7;){var r,o=a%7,l=$("air-datepicker-body--day-name",(_defineProperty(r={},m,i(o)),_defineProperty(r,"-clickable-",!!n),r)),c=this.dp.locale.daysMin[o];t+='<div class="'.concat(l,"\" data-day-index='").concat(o,"'>").concat(c,"</div>"),s++,a++}return t}},{key:"_getDaysCells",value:function(){var e=this.dp,t=e.viewDate,i=e.locale.firstDay,n=w(t),a=_(t),s=a.year,r=a.month,o=new Date(s,r,1),l=new Date(s,r,n),c=o.getDay()-i,h=6-l.getDay()+i;h=h>6?h-7:h;for(var u=function(e,t){var i=_(e),n=i.year,a=i.month,s=i.date;return new Date(n,a,s-t)}(o,c=c<0?c+7:c),d=n+c+h,p=u.getDate(),f=_(u),v=f.year,y=f.month,m=0;m<d;){var g=new Date(v,y,p+m);this._generateCell(g),m++}}},{key:"_generateCell",value:function(e){var t=this.type,i=this.dp,n=this.opts,a=new P({type:t,dp:i,opts:n,date:e,body:this});return this.cells.push(a),a}},{key:"_generateDayCells",value:function(){this._getDaysCells()}},{key:"_generateMonthCells",value:function(){for(var e=this.dp.parsedViewDate.year,t=0;t<12;)this.cells.push(this._generateCell(new Date(e,t))),t++}},{key:"_generateYearCells",value:function(){for(var e=M(this.dp.viewDate),t=e[0]-1,i=e[1]+1,n=t;n<=i;)this.cells.push(this._generateCell(new Date(n,0))),n++}},{key:"renderDayNames",value:function(){this.$names.innerHTML=this._getDayNamesHtml()}},{key:"_generateCells",value:function(){switch(this.type){case n:this._generateDayCells();break;case a:this._generateMonthCells();break;case s:this._generateYearCells()}}},{key:"show",value:function(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}},{key:"hide",value:function(){this.isVisible=!1,this.$el.classList.add("-hidden-")}},{key:"destroyCells",value:function(){this.cells.forEach((function(e){return e.destroy()})),this.cells=[],this.$cells.innerHTML=""}},{key:"destroy",value:function(){this.destroyCells(),this.dp.off(c,this.onChangeViewDate),this.dp.off(h,this.onChangeCurrentView)}}]),e}();function K(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var U=function(){function e(t){var i=this;_classCallCheck(this,e);var n=t.dp,a=t.opts;K(this,"onClickNav",(function(e){var t=H(e.target,".air-datepicker-nav--action");if(t){var n=t.dataset.action;i.dp[n]()}})),K(this,"onChangeViewDate",(function(){i.render(),i._resetNavStatus(),i.handleNavStatus()})),K(this,"onChangeCurrentView",(function(){i.render(),i._resetNavStatus(),i.handleNavStatus()})),K(this,"onClickNavTitle",(function(){i.dp.isFinalView||i.dp.up()})),K(this,"update",(function(){var e=i.opts,t=e.prevHtml,n=e.nextHtml;i.$prev.innerHTML=t,i.$next.innerHTML=n,i._resetNavStatus(),i.render(),i.handleNavStatus()})),K(this,"renderDelay",(function(){setTimeout(i.render)})),K(this,"render",(function(){i.$title.innerHTML=i._getTitle(),function(e,t){for(var i in t)t[i]?e.classList.add(i):e.classList.remove(i)}(i.$title,{"-disabled-":i.dp.isFinalView})})),this.dp=n,this.opts=a,this.init()}return _createClass(e,[{key:"init",value:function(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}},{key:"_defineDOM",value:function(){this.$title=D(".air-datepicker-nav--title",this.$el),this.$prev=D('[data-action="prev"]',this.$el),this.$next=D('[data-action="next"]',this.$el)}},{key:"_bindEvents",value:function(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}},{key:"_bindDatepickerEvents",value:function(){this.dp.on(c,this.onChangeViewDate),this.dp.on(h,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(d,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(p,this.render))}},{key:"destroy",value:function(){this.dp.off(c,this.onChangeViewDate),this.dp.off(h,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(d,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(p,this.render))}},{key:"_createElement",value:function(){this.$el=k({tagName:"nav",className:"air-datepicker-nav"})}},{key:"_getTitle",value:function(){var e=this.dp,t=this.opts.navTitles[e.currentView];return"function"==typeof t?t(e):e.formatDate(e.viewDate,t)}},{key:"handleNavStatus",value:function(){var e=this.opts.disableNavWhenOutOfRange,t=this.dp,i=t.minDate,r=t.maxDate;if((i||r)&&e){var o=this.dp.parsedViewDate,l=o.year,c=o.month,h=!!i&&_(i),u=!!r&&_(r);switch(this.dp.currentView){case n:i&&h.month>=c&&h.year>=l&&this._disableNav("prev"),r&&u.month<=c&&u.year<=l&&this._disableNav("next");break;case a:i&&h.year>=l&&this._disableNav("prev"),r&&u.year<=l&&this._disableNav("next");break;case s:var d=M(this.dp.viewDate);i&&h.year>=d[0]&&this._disableNav("prev"),r&&u.year<=d[1]&&this._disableNav("next")}}}},{key:"_disableNav",value:function(e){D('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}},{key:"_resetNavStatus",value:function(){!function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];e.length?e.forEach((function(e){var t;(t=e.classList).remove.apply(t,n)})):(t=e.classList).remove.apply(t,n)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}},{key:"_buildBaseHtml",value:function(){var e=this.opts,t=e.prevHtml,i=e.nextHtml;this.$el.innerHTML='<div class="air-datepicker-nav--action" data-action="prev">'.concat(t,"</div>")+'<div class="air-datepicker-nav--title"></div>'+'<div class="air-datepicker-nav--action" data-action="next">'.concat(i,"</div>")}},{key:"isNavIsFunction",get:function(){var e=this.opts.navTitles;return Object.keys(e).find((function(t){return"function"==typeof e[t]}))}}]),e}(),Y={today:{content:function(e){return e.locale.today},onClick:function(e){return e.setViewDate(new Date)}},clear:{content:function(e){return e.locale.clear},onClick:function(e){return e.clear()}}},W=function(){function e(t){_classCallCheck(this,e);var i=t.dp,n=t.opts;this.dp=i,this.opts=n,this.init()}return _createClass(e,[{key:"init",value:function(){this.createElement(),this.render()}},{key:"createElement",value:function(){this.$el=k({className:"air-datepicker-buttons"})}},{key:"destroy",value:function(){this.$el.parentNode.removeChild(this.$el)}},{key:"clearHtml",value:function(){return this.$el.innerHTML="",this}},{key:"generateButtons",value:function(){var e=this,t=this.opts.buttons;Array.isArray(t)||(t=[t]),t.forEach((function(t){var i=t;"string"==typeof t&&Y[t]&&(i=Y[t]);var n=e.createButton(i);i.onClick&&e.attachEventToButton(n,i.onClick),e.$el.appendChild(n)}))}},{key:"attachEventToButton",value:function(e,t){var i=this;e.addEventListener("click",(function(){t(i.dp)}))}},{key:"createButton",value:function(e){var t=e.content,i=e.className,n=e.tagName,a=void 0===n?"button":n,s=e.attrs,r=void 0===s?{}:s,o="function"==typeof t?t(this.dp):t;return k({tagName:a,innerHtml:"<span tabindex='-1'>".concat(o,"</span>"),className:$("air-datepicker-button",i),attrs:r})}},{key:"render",value:function(){this.generateButtons()}}]),e}();function z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var q=function(){function e(){var t=this;_classCallCheck(this,e);var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.opts,a=i.dp;z(this,"toggleTimepickerIsActive",(function(e){t.dp.timepickerIsActive=e})),z(this,"onChangeSelectedDate",(function(e){var i=e.date,n=e.updateTime,a=void 0!==n&&n;i&&(t.setMinMaxTime(i),t.setCurrentTime(!!a&&i),t.addTimeToDate(i))})),z(this,"onChangeLastSelectedDate",(function(e){e&&(t.setTime(e),t.render())})),z(this,"onChangeInputRange",(function(e){var i=e.target;t[i.getAttribute("name")]=i.value,t.updateText(),t.dp.trigger(p,{hours:t.hours,minutes:t.minutes})})),z(this,"onMouseEnterLeave",(function(e){var i=e.target.getAttribute("name"),n=t.$minutesText;"hours"===i&&(n=t.$hoursText),n.classList.toggle("-focus-")})),z(this,"onFocus",(function(){t.toggleTimepickerIsActive(!0)})),z(this,"onBlur",(function(){t.toggleTimepickerIsActive(!1)})),this.opts=n,this.dp=a;var s=this.dp.locale.timeFormat;s&&(s.match(I("h"))||s.match(I("hh")))&&(this.ampm=!0),this.init()}return _createClass(e,[{key:"init",value:function(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}},{key:"bindDatepickerEvents",value:function(){this.dp.on(d,this.onChangeSelectedDate),this.dp.on(f,this.onChangeLastSelectedDate)}},{key:"bindDOMEvents",value:function(){var e="input";navigator.userAgent.match(/trident/gi)&&(e="change"),x(this.$ranges,e,this.onChangeInputRange),x(this.$ranges,"mouseenter",this.onMouseEnterLeave),x(this.$ranges,"mouseleave",this.onMouseEnterLeave),x(this.$ranges,"focus",this.onFocus),x(this.$ranges,"mousedown",this.onFocus),x(this.$ranges,"blur",this.onBlur)}},{key:"createElement",value:function(){this.$el=k({className:$("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}},{key:"destroy",value:function(){this.dp.off(d,this.onChangeSelectedDate),this.dp.off(f,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}},{key:"buildHtml",value:function(){var e=this.ampm,t=this.hours,i=this.displayHours,n=this.minutes,a=this.minHours,s=this.minMinutes,r=this.maxHours,o=this.maxMinutes,l=this.dayPeriod,c=this.opts,h=c.hoursStep,u=c.minutesStep;this.$el.innerHTML='<div class="air-datepicker-time--current">'+'   <span class="air-datepicker-time--current-hours">'.concat(C(i),"</span>")+'   <span class="air-datepicker-time--current-colon">:</span>'+'   <span class="air-datepicker-time--current-minutes">'.concat(C(n),"</span>")+"   ".concat(e?"<span class='air-datepicker-time--current-ampm'>".concat(l,"</span>"):"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+'      <input type="range" name="hours" value="'.concat(t,'" min="').concat(a,'" max="').concat(r,'" step="').concat(h,'"/>')+'   </div>   <div class="air-datepicker-time--row">'+'      <input type="range" name="minutes" value="'.concat(n,'" min="').concat(s,'" max="').concat(o,'" step="').concat(u,'"/>')+"   </div></div>"}},{key:"defineDOM",value:function(){var e=this,t=function(t){return D(t,e.$el)};this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=t('[name="hours"]'),this.$minutes=t('[name="minutes"]'),this.$hoursText=t(".air-datepicker-time--current-hours"),this.$minutesText=t(".air-datepicker-time--current-minutes"),this.$ampm=t(".air-datepicker-time--current-ampm")}},{key:"setTime",value:function(e){this.setMinMaxTime(e),this.setCurrentTime(e)}},{key:"addTimeToDate",value:function(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}},{key:"setMinMaxTime",value:function(e){if(this.setMinMaxTimeFromOptions(),e){var t=this.dp,i=t.minDate,n=t.maxDate;i&&T(e,i)&&this.setMinTimeFromMinDate(i),n&&T(e,n)&&this.setMaxTimeFromMaxDate(n)}}},{key:"setCurrentTime",value:function(e){var t=e?_(e):this,i=t.hours,n=t.minutes;this.hours=O(i,this.minHours,this.maxHours),this.minutes=O(n,this.minMinutes,this.maxMinutes)}},{key:"setMinMaxTimeFromOptions",value:function(){var e=this.opts,t=e.minHours,i=e.minMinutes,n=e.maxHours,a=e.maxMinutes;this.minHours=O(t,0,23),this.minMinutes=O(i,0,59),this.maxHours=O(n,0,23),this.maxMinutes=O(a,0,59)}},{key:"setMinTimeFromMinDate",value:function(e){var t=this.dp.lastSelectedDate;this.minHours=e.getHours(),t&&t.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}},{key:"setMaxTimeFromMaxDate",value:function(e){var t=this.dp.lastSelectedDate;this.maxHours=e.getHours(),t&&t.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}},{key:"getDayPeriod",value:function(e,t){var i=e,n=Number(e);e instanceof Date&&(i=_(e),n=Number(i.hours));var a="am";if(t||this.ampm){switch(!0){case 12===n:case n>11:a="pm"}n=n%12==0?12:n%12}return{hours:n,dayPeriod:a}}},{key:"updateSliders",value:function(){b(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,b(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}},{key:"updateText",value:function(){this.$hoursText.innerHTML=C(this.displayHours),this.$minutesText.innerHTML=C(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}},{key:"hours",get:function(){return this._hours},set:function(e){this._hours=e;var t=this.getDayPeriod(e),i=t.hours,n=t.dayPeriod;this.displayHours=i,this.dayPeriod=n}},{key:"render",value:function(){this.updateSliders(),this.updateText()}}]),e}();function J(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var X=function(){function e(t){var i=this;_classCallCheck(this,e);var n=t.dp,a=t.opts;J(this,"pressedKeys",new Set),J(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],function(e){return e.month++}],[[["Control","ArrowLeft"],["Control","ArrowDown"]],function(e){return e.month--}],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],function(e){return e.year++}],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],function(e){return e.year--}],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],function(e){return e.year+=10}],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],function(e){return e.year-=10}],[["Control","Shift","ArrowUp"],function(e,t){return t.up()}]])),J(this,"handleHotKey",(function(e){var t=i.hotKeys.get(e),n=_(i.getInitialFocusDate());t(n,i.dp);var a=n.year,s=n.month,r=n.date,o=w(new Date(a,s));o<r&&(r=o);var l=i.dp.getClampedDate(new Date(a,s,r));i.dp.setFocusDate(l,{viewDateTransition:!0})})),J(this,"isHotKeyPressed",(function(){var e,t=!1,n=i.pressedKeys.size,a=function(e){return i.pressedKeys.has(e)},s=_createForOfIteratorHelper(i.hotKeys);try{var r=function(){var i=_slicedToArray(e.value,1)[0];if(t)return"break";if(Array.isArray(i[0]))i.forEach((function(e){t||n!==e.length||(t=e.every(a)&&i)}));else{if(n!==i.length)return"continue";t=i.every(a)&&i}};for(s.s();!(e=s.n()).done;){var o=r();if("break"===o)break}}catch(e){s.e(e)}finally{s.f()}return t})),J(this,"isArrow",(function(e){return e>=37&&e<=40})),J(this,"onKeyDown",(function(e){var t=e.key,n=e.which,a=i.dp,s=i.dp.focusDate,r=i.opts;i.registerKey(t);var o=i.isHotKeyPressed();if(o)return e.preventDefault(),void i.handleHotKey(o);if(i.isArrow(n))return e.preventDefault(),void i.focusNextCell(t);if("Enter"===t){if(a.currentView!==r.minView)return void a.down();if(s){var l=a._checkIfDateIsSelected(s);return void(l?a._handleAlreadySelectedDates(l,s):a.selectDate(s))}}"Escape"===t&&i.dp.hide()})),J(this,"onKeyUp",(function(e){i.removeKey(e.key)})),this.dp=n,this.opts=a,this.init()}return _createClass(e,[{key:"init",value:function(){this.bindKeyboardEvents()}},{key:"bindKeyboardEvents",value:function(){var e=this.dp.$el;e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}},{key:"destroy",value:function(){var e=this.dp.$el;e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}},{key:"getInitialFocusDate",value:function(){var e=this.dp,t=e.focusDate,i=e.currentView,r=e.selectedDates,o=e.parsedViewDate,l=o.year,c=o.month,h=t||r[r.length-1];if(!h)switch(i){case n:h=new Date(l,c,(new Date).getDate());break;case a:h=new Date(l,c,1);break;case s:h=new Date(l,0,1)}return h}},{key:"focusNextCell",value:function(e){var t=this.getInitialFocusDate(),i=this.dp.currentView,r=n,o=a,l=s,c=_(t),h=c.year,u=c.month,d=c.date;switch(e){case"ArrowLeft":i===r&&(d-=1),i===o&&(u-=1),i===l&&(h-=1);break;case"ArrowUp":i===r&&(d-=7),i===o&&(u-=3),i===l&&(h-=4);break;case"ArrowRight":i===r&&(d+=1),i===o&&(u+=1),i===l&&(h+=1);break;case"ArrowDown":i===r&&(d+=7),i===o&&(u+=3),i===l&&(h+=4)}var p=this.dp.getClampedDate(new Date(h,u,d));this.dp.setFocusDate(p,{viewDateTransition:!0})}},{key:"registerKey",value:function(e){this.pressedKeys.add(e)}},{key:"removeKey",value:function(e){this.pressedKeys.delete(e)}}]),e}(),G={on:function(e,t){this.__events||(this.__events={}),this.__events[e]?this.__events[e].push(t):this.__events[e]=[t]},off:function(e,t){this.__events&&this.__events[e]&&(this.__events[e]=this.__events[e].filter((function(e){return e!==t})))},removeAllEvents:function(){this.__events={}},trigger:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.__events&&this.__events[e]&&this.__events[e].forEach((function(e){e.apply(void 0,i)}))}};function Q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Z,ee="",te="",ie="",ne=!1,ae=function(){function e(t,i){var r=this;_classCallCheck(this,e);var o=this;if(Q(this,"viewIndexes",[n,a,s]),Q(this,"next",(function(){var e=r.parsedViewDate,t=e.year,i=e.month;switch(r.currentView){case n:r.setViewDate(new Date(t,i+1,1));break;case a:r.setViewDate(new Date(t+1,i,1));break;case s:r.setViewDate(new Date(t+10,0,1))}})),Q(this,"prev",(function(){var e=r.parsedViewDate,t=e.year,i=e.month;switch(r.currentView){case n:r.setViewDate(new Date(t,i-1,1));break;case a:r.setViewDate(new Date(t-1,i,1));break;case s:r.setViewDate(new Date(t-10,0,1))}})),Q(this,"_finishHide",(function(){r.hideAnimation=!1,r._destroyComponents(),r.$container.removeChild(r.$datepicker)})),Q(this,"setPosition",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"!=typeof(e=e||o.opts.position)){var i,n,a=o.opts.isMobile,s=o.$el.getBoundingClientRect(),r=o.$el.getBoundingClientRect(),l=o.$datepicker.offsetParent,c=o.$el.offsetParent,h=o.$datepicker.getBoundingClientRect(),u=e.split(" "),d=window.scrollY,p=window.scrollX,f=o.opts.offset,v=u[0],y=u[1];if(a)o.$datepicker.style.cssText="left: 50%; top: 50%";else{if(l===c&&l!==document.body&&(r={top:o.$el.offsetTop,left:o.$el.offsetLeft,width:s.width,height:o.$el.offsetHeight},d=0,p=0),l!==c&&l!==document.body){var m=l.getBoundingClientRect();r={top:s.top-m.top,left:s.left-m.left,width:s.width,height:s.height},d=0,p=0}switch(v){case"top":i=r.top-h.height-f;break;case"right":n=r.left+r.width+f;break;case"bottom":i=r.top+r.height+f;break;case"left":n=r.left-h.width-f}switch(y){case"top":i=r.top;break;case"right":n=r.left+r.width-h.width;break;case"bottom":i=r.top+r.height-h.height;break;case"left":n=r.left;break;case"center":/left|right/.test(v)?i=r.top+r.height/2-h.height/2:n=r.left+r.width/2-h.width/2}o.$datepicker.style.cssText="left: ".concat(n+p,"px; top: ").concat(i+d,"px")}}else o.customHide=e({$datepicker:o.$datepicker,$target:o.$el,$pointer:o.$pointer,isViewChange:t,done:o._finishHide})})),Q(this,"_setInputValue",(function(){var e=r.opts,t=r.$altField,i=r.locale.dateFormat,n=e.altFieldDateFormat;e.altField&&t&&(t.value=r._getInputValue(n)),r.$el.value=r._getInputValue(i)})),Q(this,"_getInputValue",(function(e){var t=r.selectedDates,i=r.opts,n=i.multipleDates,a=i.multipleDatesSeparator;if(!t.length)return"";var s="function"==typeof e,o=s?e(n?t:t[0]):t.map((function(t){return r.formatDate(t,e)}));return o=s?o:o.join(a)})),Q(this,"_checkIfDateIsSelected",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,i=!1;return o.selectedDates.some((function(n){var a=T(e,n,t);return i=a&&n,a})),i})),Q(this,"_scheduleCallAfterTransition",(function(e){r._cancelScheduledCall(),e&&e(!1),r._onTransitionEnd=function(){e&&e(!0)},r.$datepicker.addEventListener("transitionend",r._onTransitionEnd,{once:!0})})),Q(this,"_cancelScheduledCall",(function(){r.$datepicker.removeEventListener("transitionend",r._onTransitionEnd)})),Q(this,"setViewDate",(function(e){if((e=E(e))instanceof Date&&!T(e,r.viewDate)){var t=r.viewDate;r.viewDate=e;var i=r.opts.onChangeViewDate;if(i){var n=r.parsedViewDate;i({month:n.month,year:n.year,decade:r.curDecade})}r.trigger(c,e,t)}})),Q(this,"setFocusDate",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=E(e))instanceof Date)&&(o.focusDate=e,o.opts.range&&e&&o._handleRangeOnFocus(),o.trigger(u,e,t))})),Q(this,"setCurrentView",(function(e){if(r.viewIndexes.includes(e)){if(r.currentView=e,r.elIsInput&&r.visible&&r.setPosition(void 0,!0),r.trigger(h,e),!r.views[e]){var t=r.views[e]=new B({dp:r,opts:r.opts,type:e});r.shouldUpdateDOM&&r.$content.appendChild(t.$el)}r.opts.onChangeView&&r.opts.onChangeView(e)}})),Q(this,"_updateLastSelectedDate",(function(e){r.lastSelectedDate=e,r.trigger(f,e)})),Q(this,"destroy",(function(){var e=r.opts,t=e.showEvent,i=e.isMobile,n=r.$datepicker.parentNode;n&&n.removeChild(r.$datepicker),r.$el.removeEventListener(t,r._onFocus),r.$el.removeEventListener("blur",r._onBlur),window.removeEventListener("resize",r._onResize),i&&r._removeMobileAttributes(),r.keyboardNav&&r.keyboardNav.destroy(),r.views=null,r.nav=null,r.$datepicker=null,r.opts=null,r.$customContainer=null,r.viewDate=null,r.focusDate=null,r.selectedDates=null,r.rangeDateFrom=null,r.rangeDateTo=null})),Q(this,"update",(function(e){var t=L({},r.opts);L(r.opts,e);var i=r.opts,a=i.timepicker,s=i.buttons,o=i.range,l=i.selectedDates,c=i.isMobile,h=r.visible||r.treatAsInline;r._createMinMaxDates(),r._limitViewDateByMaxMinDates(),r._handleLocale(),!t.selectedDates&&l&&r.selectDate(l),e.view&&r.setCurrentView(e.view),r._setInputValue(),t.range&&!o?(r.rangeDateTo=!1,r.rangeDateFrom=!1):!t.range&&o&&r.selectedDates.length&&(r.rangeDateFrom=r.selectedDates[0],r.rangeDateTo=r.selectedDates[1]),t.timepicker&&!a?(h&&r.timepicker.destroy(),r.timepicker=!1,r.$timepicker.parentNode.removeChild(r.$timepicker)):!t.timepicker&&a&&r._addTimepicker(),!t.buttons&&s?r._addButtons():t.buttons&&!s?(r.buttons.destroy(),r.$buttons.parentNode.removeChild(r.$buttons)):h&&t.buttons&&s&&r.buttons.clearHtml().render(),!t.isMobile&&c?(r.treatAsInline||ie||r._createMobileOverlay(),r._addMobileAttributes(),r.visible&&r._showMobileOverlay()):t.isMobile&&!c&&(r._removeMobileAttributes(),r.visible&&(ie.classList.remove("-active-"),"function"!=typeof r.opts.position&&r.setPosition())),h&&(r.nav.update(),r.views[r.currentView].render(),r.currentView===n&&r.views[r.currentView].renderDayNames())})),Q(this,"isOtherMonth",(function(e){return _(e).month!==r.parsedViewDate.month})),Q(this,"isOtherYear",(function(e){return _(e).year!==r.parsedViewDate.year})),Q(this,"isOtherDecade",(function(e){var t=_(e).year,i=_slicedToArray(M(r.viewDate),2),n=i[0],a=i[1];return t<n||t>a})),Q(this,"_onChangeSelectedDate",(function(e){var t=e.silent;setTimeout((function(){r._setInputValue(),r.opts.onSelect&&!t&&r._triggerOnSelect()}))})),Q(this,"_onChangeFocusedDate",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.viewDateTransition;if(e){var n=!1;i&&(n=o.isOtherMonth(e)||o.isOtherYear(e)||o.isOtherDecade(e)),n&&o.setViewDate(e)}})),Q(this,"_onChangeTime",(function(e){var t=e.hours,i=e.minutes,n=new Date,a=r.lastSelectedDate,s=r.opts.onSelect,o=a;a||(o=n);var l=r.getCell(o,r.currentViewSingular),c=l&&l.adpCell;c&&c.isDisabled||(o.setHours(t),o.setMinutes(i),a?(r._setInputValue(),s&&r._triggerOnSelect()):r.selectDate(o))})),Q(this,"_onFocus",(function(e){r.visible||r.show()})),Q(this,"_onBlur",(function(e){r.inFocus||!r.visible||r.opts.isMobile||r.hide()})),Q(this,"_onMouseDown",(function(e){r.inFocus=!0})),Q(this,"_onMouseUp",(function(e){r.inFocus=!1,r.$el.focus()})),Q(this,"_onResize",(function(){r.visible&&"function"!=typeof r.opts.position&&r.setPosition()})),Q(this,"_onClickOverlay",(function(){r.visible&&r.hide()})),Q(this,"isWeekend",(function(e){return r.opts.weekends.includes(e)})),Q(this,"getClampedDate",(function(e){var t=r.minDate,i=r.maxDate,n=e;return i&&S(e,i)?n=i:t&&A(e,t)&&(n=t),n})),this.$el=D(t),this.$el){this.$datepicker=k({className:"air-datepicker"}),this.opts=L({},g,i),this.$customContainer=!!this.opts.container&&D(this.opts.container),this.$altField=D(this.opts.altField||!1),ee||(ee=D("body"));var l=this.opts,d=l.view;l.startDate||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=E(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=d,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}}return _createClass(e,[{key:"init",value:function(){var t,i=this.opts,n=this.treatAsInline,a=this.opts,s=a.inline,r=a.isMobile,o=a.selectedDates,l=a.keyboardNav,c=a.onlyTimepicker;ne||s||!this.elIsInput||(ne=!0,te=k({className:t=e.defaultContainerId,id:t}),ee.appendChild(te)),!r||ie||n||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(s||this._bindEvents(),l&&!c&&(this.keyboardNav=new X({dp:this,opts:i}))),o&&this.selectDate(o,{silent:!0}),this.opts.visible&&!n&&this.show(),r&&!n&&this.$el.setAttribute("readonly",!0),n&&this._createComponents()}},{key:"_createMobileOverlay",value:function(){ie=k({className:"air-datepicker-overlay"}),te.appendChild(ie)}},{key:"_createComponents",value:function(){var e,t=this.opts,i=this.treatAsInline,n=this.opts,a=n.inline,s=n.buttons,r=n.timepicker,o=n.position,l=n.classes,c=n.onlyTimepicker,h=n.isMobile;this._buildBaseHtml(),this.elIsInput&&(a||this._setPositionClasses(o)),!a&&this.elIsInput||this.$datepicker.classList.add("-inline-"),l&&(e=this.$datepicker.classList).add.apply(e,_toConsumableArray(l.split(" "))),c&&this.$datepicker.classList.add("-only-timepicker-"),h&&!i&&this._addMobileAttributes(),this.views[this.currentView]=new B({dp:this,type:this.currentView,opts:t}),this.nav=new U({dp:this,opts:t}),r&&this._addTimepicker(),s&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}},{key:"_destroyComponents",value:function(){for(var e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}},{key:"_addMobileAttributes",value:function(){ie.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}},{key:"_removeMobileAttributes",value:function(){ie.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}},{key:"_createMinMaxDates",value:function(){var e=this.opts,t=e.minDate,i=e.maxDate;this.minDate=!!t&&E(t),this.maxDate=!!i&&E(i)}},{key:"_addTimepicker",value:function(){this.$timepicker=k({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new q({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}},{key:"_addButtons",value:function(){this.$buttons=k({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new W({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}},{key:"_bindSubEvents",value:function(){this.on(d,this._onChangeSelectedDate),this.on(u,this._onChangeFocusedDate),this.on(p,this._onChangeTime)}},{key:"_buildBaseHtml",value:function(){var e,t,i=this.opts.inline;this.elIsInput?i?(e=this.$datepicker,(t=this.$el).parentNode.insertBefore(e,t.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=D(".air-datepicker--content",this.$datepicker),this.$pointer=D(".air-datepicker--pointer",this.$datepicker),this.$nav=D(".air-datepicker--navigation",this.$datepicker)}},{key:"_handleLocale",value:function(){var e,t=this.opts,i=t.locale,n=t.dateFormat,a=t.firstDay,s=t.timepicker,r=t.onlyTimepicker,o=t.timeFormat,l=t.dateTimeSeparator;this.locale=(e=i,JSON.parse(JSON.stringify(e))),n&&(this.locale.dateFormat=n),void 0!==o&&""!==o&&(this.locale.timeFormat=o);var c=this.locale.timeFormat;if(""!==a&&(this.locale.firstDay=a),s&&"function"!=typeof n){var h=c?l:"";this.locale.dateFormat=[this.locale.dateFormat,c||""].join(h)}r&&(this.locale.dateFormat=this.locale.timeFormat)}},{key:"_setPositionClasses",value:function(e){var t;if("function"!=typeof e){var i=(e=e.split(" "))[0],n=e[1],a="air-datepicker -".concat(i,"-").concat(n,"- -from-").concat(i,"-");(t=this.$datepicker.classList).add.apply(t,_toConsumableArray(a.split(" ")))}else this.$datepicker.classList.add("-custom-position-")}},{key:"_bindEvents",value:function(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}},{key:"_limitViewDateByMaxMinDates",value:function(){var e=this.viewDate,t=this.minDate,i=this.maxDate;i&&S(e,i)&&this.setViewDate(i),t&&A(e,t)&&this.setViewDate(t)}},{key:"formatDate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,i=arguments.length>1?arguments[1]:void 0;if((t=E(t))instanceof Date){var n=i,a=this.locale,s=_(t),r=M(t),o=e.replacer,l="am";this.opts.timepicker&&this.timepicker&&(l=this.timepicker.getDayPeriod(t).dayPeriod);for(var c={T:t.getTime(),m:s.minutes,mm:s.fullMinutes,h:s.hours12,hh:s.fullHours12,H:s.hours,HH:s.fullHours,aa:l,AA:l.toUpperCase(),E:a.daysShort[s.day],EEEE:a.days[s.day],d:s.date,dd:s.fullDate,M:s.month+1,MM:s.fullMonth,MMM:a.monthsShort[s.month],MMMM:a.months[s.month],yy:s.year.toString().slice(-2),yyyy:s.year,yyyy1:r[0],yyyy2:r[1]},h=0,u=Object.entries(c);h<u.length;h++){var d=_slicedToArray(u[h],2),p=d[0],f=d[1];n=o(n,I(p),f)}return n}}},{key:"down",value:function(e){this._handleUpDownActions(e,"down")}},{key:"up",value:function(e){this._handleUpDownActions(e,"up")}},{key:"selectDate",value:function(e){var t,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.currentView,o=this.parsedViewDate,l=this.selectedDates,c=a.updateTime,h=this.opts,u=h.moveToOtherMonthsOnSelect,p=h.moveToOtherYearsOnSelect,f=h.multipleDates,y=h.range,m=h.autoClose,g=l.length;if(Array.isArray(e))return e.forEach((function(e){i.selectDate(e,a)})),new Promise((function(e){setTimeout(e)}));if((e=E(e))instanceof Date){if(r===n&&e.getMonth()!==o.month&&u&&(t=new Date(e.getFullYear(),e.getMonth(),1)),r===s&&e.getFullYear()!==o.year&&p&&(t=new Date(e.getFullYear(),0,1)),t&&this.setViewDate(t),f&&!y){if(g===f)return;this._checkIfDateIsSelected(e)||l.push(e)}else if(y)switch(g){case 1:l.push(e),this.rangeDateTo||(this.rangeDateTo=e),S(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo="";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(d,{action:v,silent:null==a?void 0:a.silent,date:e,updateTime:c}),this._updateLastSelectedDate(e),m&&!this.timepickerIsActive&&this.visible&&(f||y?y&&1===g&&this.hide():this.hide()),new Promise((function(e){setTimeout(e)}))}}},{key:"unselectDate",value:function(e){var t=this,i=this.selectedDates,n=this;if((e=E(e))instanceof Date)return i.some((function(a,s){if(T(a,e))return i.splice(s,1),n.selectedDates.length?n._updateLastSelectedDate(n.selectedDates[n.selectedDates.length-1]):(n.rangeDateFrom="",n.rangeDateTo="",n._updateLastSelectedDate(!1)),t.trigger(d,{action:y,date:e}),!0}))}},{key:"replaceDate",value:function(e,t){var i=this,n=this.selectedDates.find((function(t){return T(t,e,i.currentView)})),a=this.selectedDates.indexOf(n);a<0||T(this.selectedDates[a],t,this.currentView)||(this.selectedDates[a]=t,this.trigger(d,{action:v,date:t,updateTime:!0}),this._updateLastSelectedDate(t))}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(d,{action:y,silent:e.silent}),new Promise((function(e){setTimeout(e)}))}},{key:"show",value:function(){var e=this.opts,t=e.onShow,i=e.isMobile;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,t&&this._scheduleCallAfterTransition(t),i&&this._showMobileOverlay()}},{key:"hide",value:function(){var e=this,t=this.opts,i=t.onHide,n=t.isMobile,a=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition((function(t){!e.customHide&&(t&&a||!t&&!a)&&e._finishHide(),i&&i(t)})),n&&ie.classList.remove("-active-")}},{key:"_triggerOnSelect",value:function(){var e=this,t=[],i=[],n=this.selectedDates,a=this.locale,s=this.opts,r=s.onSelect,o=s.multipleDates,l=s.range,c=o||l,h="function"==typeof a.dateFormat;n.length&&(t=n.map(F),i=h?o?a.dateFormat(t):t.map((function(e){return a.dateFormat(e)})):t.map((function(t){return e.formatDate(t,a.dateFormat)}))),r({date:c?t:t[0],formattedDate:c?i:i[0],datepicker:this})}},{key:"_handleAlreadySelectedDates",value:function(e,t){var i=this.opts,n=i.range,a=i.toggleSelected;n?a?this.unselectDate(t):2!==this.selectedDates.length&&this.selectDate(t):a&&this.unselectDate(t),a||this._updateLastSelectedDate(e)}},{key:"_handleUpDownActions",value:function(e,t){if((e=E(e||this.focusDate||this.viewDate))instanceof Date){var i="up"===t?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.setViewDate(new Date(e.getFullYear(),e.getMonth(),1)),this.setCurrentView(this.viewIndexes[i])}}},{key:"_handleRangeOnFocus",value:function(){1===this.selectedDates.length&&(S(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}},{key:"getCell",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;if((e=E(e))instanceof Date){var n=_(e),a=n.year,s=n.month,c=n.date,h='[data-year="'.concat(a,'"]'),u='[data-month="'.concat(s,'"]'),d='[data-date="'.concat(c,'"]'),p=(_defineProperty(t={},r,"".concat(h).concat(u).concat(d)),_defineProperty(t,o,"".concat(h).concat(u)),_defineProperty(t,l,"".concat(h)),t);return this.views[this.currentView].$el.querySelector(p[i])}}},{key:"_showMobileOverlay",value:function(){ie.classList.add("-active-")}},{key:"_hasTransition",value:function(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((function(e,t){return parseFloat(t)+e}),0)>0}},{key:"shouldUpdateDOM",get:function(){return this.visible||this.treatAsInline}},{key:"parsedViewDate",get:function(){return _(this.viewDate)}},{key:"currentViewSingular",get:function(){return this.currentView.slice(0,-1)}},{key:"curDecade",get:function(){return M(this.viewDate)}},{key:"viewIndex",get:function(){return this.viewIndexes.indexOf(this.currentView)}},{key:"isFinalView",get:function(){return this.currentView===s}},{key:"hasSelectedDates",get:function(){return this.selectedDates.length>0}},{key:"isMinViewReached",get:function(){return this.currentView===this.opts.minView||this.currentView===n}},{key:"$container",get:function(){return this.$customContainer||te}}],[{key:"replacer",value:function(e,t,i){return e.replace(t,(function(e,t,n,a){return t+i+a}))}}]),e}();return Q(ae,"defaults",g),Q(ae,"version","3.2.0"),Q(ae,"defaultContainerId","air-datepicker-global-container"),Z=ae.prototype,Object.assign(Z,G),i.default}()}));
